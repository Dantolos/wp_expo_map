(()=>{"use strict";var e,t={338:()=>{const e=window.wp.blocks,t=window.React,a=window.wp.i18n,l=(window.wp.data,window.wp.primitives),n=(0,t.createElement)(l.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(l.Path,{d:"M4 9v1.5h16V9H4zm12 5.5h4V13h-4v1.5zm-6 0h4V13h-4v1.5zm-6 0h4V13H4v1.5z"}));class o{constructor(e){this.ALL_ELEMENTS=e.querySelectorAll('[id^="_ai-"]'),this.SORTED_ELEMNTS=[],this.ALL_ELEMENTS.forEach((e=>{let t=e.id.split("-")[1];this.SORTED_ELEMNTS[t]||(this.SORTED_ELEMNTS[t]=[]),this.SORTED_ELEMNTS[t].push(e),e.addEventListener("mouseenter",(()=>{e.classList.add("hover-element")})),e.addEventListener("mouseleave",(()=>{e.classList.remove("hover-element")}))}))}}window.wp.apiFetch;const r=window.wp.components;function i({thisId:e,postList:a,setSelectetContent:l,selectedContent:n}){const[o,i]=(0,t.useState)("please selcet");return(0,t.useEffect)((()=>{n&&i(n)})),(0,t.createElement)("div",{className:"em-content-selection-wrapper"},(0,t.createElement)("p",null,"contentselection"),(0,t.createElement)(r.ComboboxControl,{label:"select content",value:o,onChange:t=>{l(e,t),i(t)},options:a,onInputChange:e=>setFilteredOptions(a.filter((t=>t.label.toLowerCase().startsWith(e.toLowerCase()))))}))}function s(e){const{booth:a,itemId:l,toggleActiveState:n,setSelectetContent:o}=e,[s,c]=(0,t.useState)([]);return(0,t.useEffect)((()=>{var e=[];fetch("/wp-json/wp/v2/booth?per_page=100").then((e=>e.json())).then((t=>{t.map((t=>{e.push({value:t.id,label:t.title.rendered})})),c(e)})).catch((e=>{console.error("Error:",e),setError(e)}))}),[]),(0,t.createElement)("div",{key:l,className:"element-item"},(0,t.createElement)("div",{className:"element-item-label"},(0,t.createElement)("div",{className:"element-item-nr"},a.nr),(0,t.createElement)("div",null,(0,t.createElement)(i,{thisId:l,postList:s,setSelectetContent:o,selectedContent:a.selectedContent}))),(0,t.createElement)(r.FormToggle,{checked:a.active,onChange:()=>n(index)}))}const c=window.wp.blockEditor,p=JSON.parse('{"u2":"aa-expo-plan/expo-plan"}');(0,e.registerBlockType)(p.u2,{edit:function({attributes:e,setAttributes:l}){const{mapSVGId:i,mapSVGUrl:p,mapZoom:m,boothes:d}=e,[h,u]=(0,t.useState)(null),[E,v]=(0,t.useState)(!1),[w,b]=(0,t.useState)(!1),f=e=>{l({mapSVGId:e.id,mapSVGUrl:e.url})},g=async(e,t)=>{if(d.find((t=>t.id===e))){const a=await d.map((a=>a.id===e?{...a,selectedContent:t}:a));await l({boothes:a})}else console.error(`Item with ID ${e} not found.`)};(0,t.useEffect)((()=>{p&&(async()=>{try{const e=await fetch(p);if(!e.ok)throw new Error("Failed to fetch SVG");const t=await e.text();u(t)}catch(e){console.error("There was a problem with the fetch of the SVG MAP:",e)}})()}),[p]),(0,t.useEffect)((()=>{let e=document.querySelector("#expo-plan-wrapper").querySelector("svg");if(e){let t=new o(e);E&&isEqual(t,E)||v(t)}}),[h]),(0,t.useEffect)((()=>{if(E){let e=[];for(let t=0;t<E.ALL_ELEMENTS.length;t++){const a=E.ALL_ELEMENTS[t],l=a.id.replace("_ai","").replace("b","Booth").replace("z","Zone").replace("i","Info").replace("a","Arena").replace("-"," ").replace("-"," ").replace(/\d+/g,"").trim(),n=a.id.replace("_ai-","").replace(/\d+/g,"").replace("-",""),o=a.id.replace("_ai-","").replace("_ai-","").replace("-"," ").replace(/[abiz]/g,"").trim();let r={id:a.id,type:l,type_id:n,nr:o,active:!0};e.push(r)}e.sort(((e,t)=>e.type.localeCompare(t.type)||e.nr-t.nr)),b(e),d.length<1&&l({boothes:e})}document.querySelectorAll(".element-item")}),[E]);const S=e=>{b((t=>t.map(((t,a)=>a===e?{...t,active:!t.active}:t))))};return(0,t.createElement)(t.Fragment,null,(0,t.createElement)(c.InspectorControls,null,(0,t.createElement)(r.TabPanel,{className:"my-tab-panel",activeClass:"active-tab",orientation:"horizontal",initialTabName:"tab2",tabs:[{name:"tab1",title:"General",className:"tab-one"},{name:"tab2",title:"Elements",className:"tab-two"}]},(o=>"tab1"===o.name?(0,t.createElement)(r.PanelBody,{title:(0,a.__)("Map","expo-plan"),initialOpen:!0},(0,t.createElement)(c.MediaUploadCheck,null,(0,t.createElement)(c.MediaUpload,{onSelect:f,value:i,allowedTypes:["image"],render:({open:l})=>(0,t.createElement)(r.Button,{className:0==i?"editor-post-featured-image__toggle":"editor-post-featured-image__preview",onClick:l},0==i&&(0,a.__)("Choose your svg map","Expo Plan"),null!=e&&(0,t.createElement)(r.ResponsiveWrapper,null,(0,t.createElement)("img",{src:p,height:"300px",width:"300px",style:{height:"300px"}})))})),(0,t.createElement)(r.RangeControl,{label:"Zoom",allowReset:!0,resetFallbackValue:1,step:.1,withInputField:!0,icon:n,separatorType:"topFullWidth",trackColor:"blue",isShiftStepEnabled:!0,marks:[{value:0,label:"0"},{value:2,label:"1"},{value:10,label:"10"}],railColor:"grey",renderTooltipContent:()=>m,value:m,onChange:e=>l({mapZoom:e}),min:0,max:10})):"tab2"===o.name?(0,t.createElement)(t.Fragment,null,w&&w.map(((e,a)=>0===a||e.type!==w[a-1].type?(0,t.createElement)(r.PanelBody,{title:e.type,initialOpen:!1},(0,t.createElement)(s,{booth:d.find((t=>e.id===t.id)),itemId:e.id,toggleActiveState:S,setSelectetContent:g}),w.slice(a+1).map(((l,n)=>l.type===e.type&&(0,t.createElement)(s,{key:a+n+1,booth:d.find((e=>l.id===e.id)),itemId:l.id,index:a+n+1,toggleActiveState:S,setSelectetContent:g})))):null))):void 0))),(0,t.createElement)("div",{...(0,c.useBlockProps)()},(0,t.createElement)("div",{id:"expo-plan-wrapper"},h&&(0,t.createElement)("div",{className:"expo-plan-image-container",style:{transform:`scale(${m})`},dangerouslySetInnerHTML:{__html:h}}))))}})}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.m=t,e=[],l.O=(t,a,n,o)=>{if(!a){var r=1/0;for(p=0;p<e.length;p++){for(var[a,n,o]=e[p],i=!0,s=0;s<a.length;s++)(!1&o||r>=o)&&Object.keys(l.O).every((e=>l.O[e](a[s])))?a.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(p--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[a,n,o]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[r,i,s]=a,c=0;if(r.some((t=>0!==e[t]))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(s)var p=s(l)}for(t&&t(a);c<r.length;c++)o=r[c],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(p)},a=globalThis.webpackChunkexpo_plan=globalThis.webpackChunkexpo_plan||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=l.O(void 0,[431],(()=>l(338)));n=l.O(n)})();